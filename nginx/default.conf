# Default server configuration

server {
	listen 443 ssl ;
	listen [::]:443 ssl ;

	root /var/www/html;

	# Add index.php to the list if you are using PHP
	index index.html index.htm index.nginx-debian.html;
    server_name isgs-server.uow-carbon.org; # managed by Certbot


	location / {
		proxy_pass http://web:8001;
	}

    ssl_certificate /etc/letsencrypt/live/isgs-server.uow-carbon.org/fullchain.pem; # managed by Certbot
    ssl_certificate_key /etc/letsencrypt/live/isgs-server.uow-carbon.org/privkey.pem; # managed by Certbot
}
# server {
#     listen 443 default_server ssl;
#     server_name isgs-server.uow-carbon.org;
#     server_tokens off;

#     ssl_certificate     /etc/letsencrypt/live/isgs-server.uow-carbon.org/fullchain.pem;
#     ssl_certificate_key /etc/letsencrypt/live/isgs-server.uow-carbon.org/privkey.pem;
#     ssl_dhparam         /etc/letsencrypt/dhparams/dhparams.pem;

#     client_max_body_size 32m;

#     location / {
#         proxy_pass http://web:8001;
#         proxy_set_header Host $http_host;
#         proxy_set_header X-Real-IP $remote_addr;
#         proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#         proxy_set_header X-Forwarded-Proto $scheme;
#     }
# }